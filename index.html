<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>色生成アルゴリズム比較 - GenerateColor</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        'mono': ['JetBrains Mono', 'Consolas', 'monospace'],
                    }
                }
            }
        }
    </script>
    <style>
        .color-card {
            transition: all 0.3s ease;
        }
        .color-card:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
    </style>
</head>
<body class="bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100">
    <!-- ヘッダー -->
    <header class="gradient-bg text-white py-8">
        <div class="container mx-auto px-4">
            <h1 class="text-4xl font-bold text-center mb-2">🎨 色生成アルゴリズム比較</h1>
            <p class="text-center text-lg opacity-90">数学的理論に基づく美しい色の生成</p>
        </div>
    </header>

    <!-- メインコンテンツ -->
    <main class="container mx-auto px-4 py-8">
        <!-- 概要セクション -->
        <section class="mb-12">
            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6">
                <h2 class="text-2xl font-bold mb-4 text-gray-800 dark:text-gray-200">概要</h2>
                <p class="text-gray-600 dark:text-gray-300 mb-4">
                    このプロジェクトでは、4つの異なる数学的理論に基づいて色を生成するアルゴリズムを実装しています。
                    それぞれのアルゴリズムは、異なる用途やデザイン要件に適した色の組み合わせを提供します。
                </p>
                <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-4">
                    <div class="bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg">
                        <h3 class="font-semibold text-blue-800 dark:text-blue-200">等間隔色</h3>
                        <p class="text-sm text-blue-600 dark:text-blue-300">データ可視化に最適</p>
                    </div>
                    <div class="bg-green-50 dark:bg-green-900/20 p-4 rounded-lg">
                        <h3 class="font-semibold text-green-800 dark:text-green-200">フィボナッチ色</h3>
                        <p class="text-sm text-green-600 dark:text-green-300">数学的に興味深い</p>
                    </div>
                    <div class="bg-purple-50 dark:bg-purple-900/20 p-4 rounded-lg">
                        <h3 class="font-semibold text-purple-800 dark:text-purple-200">カラーホイール色</h3>
                        <p class="text-sm text-purple-600 dark:text-purple-300">デザイン理論に基づく</p>
                    </div>
                    <div class="bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded-lg">
                        <h3 class="font-semibold text-yellow-800 dark:text-yellow-200">黄金比色</h3>
                        <p class="text-sm text-yellow-600 dark:text-yellow-300">自然の美しさを再現</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- 色生成アルゴリズム比較 -->
        <section>
            <h2 class="mb-6 text-3xl font-bold text-gray-800 dark:text-gray-200">色生成アルゴリズム比較</h2>
            <div class="space-y-8">
                <!-- 等間隔色 20色 -->
                <div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6">
                    <h3 class="mb-3 text-xl font-semibold text-gray-900 dark:text-gray-200">等間隔色 20色</h3>
                    <p class="mb-2 text-sm text-gray-600 dark:text-gray-400">
                        generateEquidistantColors(20) - 最もシンプルで確実に色が分散される
                    </p>
                    <p class="mb-4 text-xs text-gray-500 dark:text-gray-400">
                        色相を360度を均等に分割して色を生成。データ可視化で最も一般的に使用され、予測可能で色の分布が均等。
                        シンプルなため、多くの色が必要な場合に適している。
                        <br />
                        <strong>参考文献:</strong> Cynthia Brewer "Color in Information Display" (1999) -
                        科学的根拠に基づく色覚障害者にも配慮した色パレット設計
                    </p>
                    <div class="grid grid-cols-10 gap-2" id="equidistant-colors">
                        <!-- JavaScriptで生成 -->
                    </div>
                </div>

                <!-- フィボナッチ色 20色 -->
                <div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6">
                    <h3 class="mb-3 text-xl font-semibold text-gray-900 dark:text-gray-200">フィボナッチ色 20色</h3>
                    <p class="mb-2 text-sm text-gray-600 dark:text-gray-400">
                        generateFibonacciColors(20) - フィボナッチ数列を使用した数学的に興味深い色
                    </p>
                    <p class="mb-4 text-xs text-gray-500 dark:text-gray-400">
                        フィボナッチ数列の逆数（約0.382）を使用して色相を決定。黄金比に似ているが、より数学的に興味深い分布。
                        芸術的なアプリケーションやデザインに適しており、自然な美しさを持つ色の分布を生成。
                        <br />
                        <strong>参考文献:</strong> "Fibonacci Numbers in Nature and Art" - Journal of Mathematics
                        and the Arts (2000s) - 数学的パターンを色彩美学に応用した研究
                    </p>
                    <div class="grid grid-cols-10 gap-2" id="fibonacci-colors">
                        <!-- JavaScriptで生成 -->
                    </div>
                </div>

                <!-- カラーホイール色 20色 -->
                <div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6">
                    <h3 class="mb-3 text-xl font-semibold text-gray-900 dark:text-gray-200">カラーホイール色 20色</h3>
                    <p class="mb-2 text-sm text-gray-600 dark:text-gray-400">
                        generateColorWheelColors(20) - カラーホイール理論に基づく洗練された色の組み合わせ
                    </p>
                    <p class="mb-4 text-xs text-gray-500 dark:text-gray-400">
                        基本色相（赤、黄、緑、シアン、青、マゼンタ）を基準に、補色・三色配色理論に基づいて色を生成。
                        デザインやアート作品に最適で、色理論に基づいた調和の取れた配色を提供。
                        6色以下の場合は基本色相を直接使用し、それ以上は補間で生成。
                        <br />
                        <strong>参考文献:</strong> Johannes Itten "The Art of Color" (1961) -
                        補色・三色配色など、視覚的調和を数学的に体系化した理論
                    </p>
                    <div class="grid grid-cols-10 gap-2" id="colorwheel-colors">
                        <!-- JavaScriptで生成 -->
                    </div>
                </div>

                <!-- 黄金比色 20色 -->
                <div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6">
                    <h3 class="mb-3 text-xl font-semibold text-gray-900 dark:text-gray-200">黄金比色 20色</h3>
                    <p class="mb-2 text-sm text-gray-600 dark:text-gray-400">
                        generateGoldenRatioColors(20) - 自然界の美しい比率を色彩に応用
                    </p>
                    <p class="mb-4 text-xs text-gray-500 dark:text-gray-400">
                        黄金比（約0.618）を使用して色相を決定。自然界に多く見られる美しい比率で、視覚的に調和の取れた色の分布を生成。
                        芸術作品や高級感のあるデザインに適しており、人間の目に自然で美しく感じられる色の組み合わせ。
                        数学的にも興味深く、無限に続く色のパターンを生成。
                        <br />
                        <strong>参考文献:</strong> Johannes Itten "The Art of Color" (1961) -
                        自然界の美しい比率を色彩に応用した調和理論
                    </p>
                    <div class="grid grid-cols-10 gap-2" id="goldenratio-colors">
                        <!-- JavaScriptで生成 -->
                    </div>
                </div>
            </div>
        </section>

        <!-- インタラクティブセクション -->
        <section class="mt-12">
            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6">
                <h2 class="mb-6 text-2xl font-bold text-gray-800 dark:text-gray-200">インタラクティブ色生成</h2>
                <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-6">
                    <!-- アルゴリズム選択 -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                            アルゴリズム
                        </label>
                        <select id="algorithm-select" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                            <option value="golden-ratio">黄金比色</option>
                            <option value="equidistant">等間隔色</option>
                            <option value="fibonacci">フィボナッチ色</option>
                            <option value="color-wheel">カラーホイール色</option>
                        </select>
                    </div>
                    
                    <!-- 色の数 -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                            色の数: <span id="color-count">10</span>
                        </label>
                        <input type="range" id="color-slider" min="5" max="30" value="10" 
                               class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-600">
                    </div>
                    
                    <!-- 彩度 -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                            彩度: <span id="saturation-value">0.8</span>
                        </label>
                        <input type="range" id="saturation-slider" min="0.1" max="1" step="0.1" value="0.8" 
                               class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-600">
                    </div>
                    
                    <!-- 明度 -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                            明度: <span id="lightness-value">0.6</span>
                        </label>
                        <input type="range" id="lightness-slider" min="0.1" max="0.9" step="0.1" value="0.6" 
                               class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-600">
                    </div>
                </div>
                
                <!-- 現在の設定表示 -->
                <div class="mt-6 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg">
                    <h3 class="text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2">現在の設定</h3>
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-sm">
                        <div>
                            <span class="text-gray-500 dark:text-gray-400">アルゴリズム:</span>
                            <span id="current-algorithm" class="ml-2 font-mono text-gray-700 dark:text-gray-300">黄金比色</span>
                        </div>
                        <div>
                            <span class="text-gray-500 dark:text-gray-400">色の数:</span>
                            <span id="current-count" class="ml-2 font-mono text-gray-700 dark:text-gray-300">10</span>
                        </div>
                        <div>
                            <span class="text-gray-500 dark:text-gray-400">彩度:</span>
                            <span id="current-saturation" class="ml-2 font-mono text-gray-700 dark:text-gray-300">0.8</span>
                        </div>
                        <div>
                            <span class="text-gray-500 dark:text-gray-400">明度:</span>
                            <span id="current-lightness" class="ml-2 font-mono text-gray-700 dark:text-gray-300">0.6</span>
                        </div>
                    </div>
                </div>
                
                <div class="mt-6">
                    <h3 class="text-lg font-semibold mb-3">生成された色</h3>
                    <div class="grid gap-2" id="interactive-colors" style="grid-template-columns: repeat(auto-fit, minmax(60px, 1fr));">
                        <!-- JavaScriptで生成 -->
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- フッター -->
    <footer class="bg-gray-800 text-white py-8 mt-12">
        <div class="container mx-auto px-4 text-center">
            <p>&copy; 2024 GenerateColor. 数学的理論に基づく色生成アルゴリズム。</p>
            <p class="text-sm text-gray-400 mt-2">
                Johannes Itten, Cynthia Brewer, Fibonacci数列などの理論を応用
            </p>
        </div>
    </footer>

    <!-- 色生成アルゴリズムのJavaScript実装 -->
    <script>
        // 黄金比を使用して色相を決定するアルゴリズム
        const generateGoldenRatioColors = (n, saturation = 0.8, lightness = 0.6, offset = 0) => {
            const colors = [];
            const goldenRatio = 0.618033988749895;

            for (let i = 0; i < n; i++) {
                const hue = ((i * goldenRatio) % 1.0) * 360 + offset;
                const h = hue % 360;

                // HSLからRGBへの変換
                const c = (1 - Math.abs(2 * lightness - 1)) * saturation;
                const x = c * (1 - Math.abs(((h / 60) % 2) - 1));
                const m = lightness - c / 2;

                let r, g, b;

                if (h < 60) {
                    r = c; g = x; b = 0;
                } else if (h < 120) {
                    r = x; g = c; b = 0;
                } else if (h < 180) {
                    r = 0; g = c; b = x;
                } else if (h < 240) {
                    r = 0; g = x; b = c;
                } else if (h < 300) {
                    r = x; g = 0; b = c;
                } else {
                    r = c; g = 0; b = x;
                }

                const red = Math.round((r + m) * 255);
                const green = Math.round((g + m) * 255);
                const blue = Math.round((b + m) * 255);

                colors.push(`#${red.toString(16).padStart(2, "0")}${green.toString(16).padStart(2, "0")}${blue.toString(16).padStart(2, "0")}`);
            }

            return colors;
        };

        // 等間隔色相分割による色生成アルゴリズム
        const generateEquidistantColors = (n, saturation = 0.8, lightness = 0.6, offset = 0) => {
            const colors = [];

            for (let i = 0; i < n; i++) {
                const hue = (i / n) * 360 + offset;
                const h = hue % 360;

                // HSLからRGBへの変換
                const c = (1 - Math.abs(2 * lightness - 1)) * saturation;
                const x = c * (1 - Math.abs(((h / 60) % 2) - 1));
                const m = lightness - c / 2;

                let r, g, b;

                if (h < 60) {
                    r = c; g = x; b = 0;
                } else if (h < 120) {
                    r = x; g = c; b = 0;
                } else if (h < 180) {
                    r = 0; g = c; b = x;
                } else if (h < 240) {
                    r = 0; g = x; b = c;
                } else if (h < 300) {
                    r = x; g = 0; b = c;
                } else {
                    r = c; g = 0; b = x;
                }

                const red = Math.round((r + m) * 255);
                const green = Math.round((g + m) * 255);
                const blue = Math.round((b + m) * 255);

                colors.push(`#${red.toString(16).padStart(2, "0")}${green.toString(16).padStart(2, "0")}${blue.toString(16).padStart(2, "0")}`);
            }

            return colors;
        };

        // フィボナッチ数列を使用した色生成アルゴリズム
        const generateFibonacciColors = (n, saturation = 0.8, lightness = 0.6, offset = 0) => {
            const colors = [];
            const fibonacciRatio = 0.381966011250105;

            for (let i = 0; i < n; i++) {
                const hue = ((i * fibonacciRatio) % 1.0) * 360 + offset;
                const h = hue % 360;

                // HSLからRGBへの変換
                const c = (1 - Math.abs(2 * lightness - 1)) * saturation;
                const x = c * (1 - Math.abs(((h / 60) % 2) - 1));
                const m = lightness - c / 2;

                let r, g, b;

                if (h < 60) {
                    r = c; g = x; b = 0;
                } else if (h < 120) {
                    r = x; g = c; b = 0;
                } else if (h < 180) {
                    r = 0; g = c; b = x;
                } else if (h < 240) {
                    r = 0; g = x; b = c;
                } else if (h < 300) {
                    r = x; g = 0; b = c;
                } else {
                    r = c; g = 0; b = x;
                }

                const red = Math.round((r + m) * 255);
                const green = Math.round((g + m) * 255);
                const blue = Math.round((b + m) * 255);

                colors.push(`#${red.toString(16).padStart(2, "0")}${green.toString(16).padStart(2, "0")}${blue.toString(16).padStart(2, "0")}`);
            }

            return colors;
        };

        // カラーホイール理論に基づく補色・三色配色アルゴリズム
        const generateColorWheelColors = (n, saturation = 0.8, lightness = 0.6, offset = 0) => {
            const colors = [];
            const baseHues = [0, 60, 120, 180, 240, 300];

            for (let i = 0; i < n; i++) {
                let hue;

                if (n <= 6) {
                    hue = baseHues[i % 6] + offset;
                } else {
                    const baseIndex = Math.floor(i / (n / 6));
                    const nextIndex = (baseIndex + 1) % 6;
                    const ratio = (i % (n / 6)) / (n / 6);
                    hue = baseHues[baseIndex] + (baseHues[nextIndex] - baseHues[baseIndex]) * ratio + offset;
                }

                hue = hue % 360;

                // HSLからRGBへの変換
                const c = (1 - Math.abs(2 * lightness - 1)) * saturation;
                const x = c * (1 - Math.abs(((hue / 60) % 2) - 1));
                const m = lightness - c / 2;

                let r, g, b;

                if (hue < 60) {
                    r = c; g = x; b = 0;
                } else if (hue < 120) {
                    r = x; g = c; b = 0;
                } else if (hue < 180) {
                    r = 0; g = c; b = x;
                } else if (hue < 240) {
                    r = 0; g = x; b = c;
                } else if (hue < 300) {
                    r = x; g = 0; b = c;
                } else {
                    r = c; g = 0; b = x;
                }

                const red = Math.round((r + m) * 255);
                const green = Math.round((g + m) * 255);
                const blue = Math.round((b + m) * 255);

                colors.push(`#${red.toString(16).padStart(2, "0")}${green.toString(16).padStart(2, "0")}${blue.toString(16).padStart(2, "0")}`);
            }

            return colors;
        };

        // 色カードを生成する関数
        const createColorCard = (color, index) => {
            return `
                <div class="color-card flex h-20 flex-col items-center justify-center rounded-lg border-2 border-gray-200 dark:border-gray-600 text-center cursor-pointer transition-all duration-200 hover:scale-105 hover:shadow-lg"
                     style="background-color: ${color}"
                     title="${color}">
                    <span class="font-mono text-xs text-white drop-shadow-lg font-bold">${index + 1}</span>
                    <span class="font-mono text-xs text-white drop-shadow-lg">${color}</span>
                </div>
            `;
        };

        // ページ読み込み時に色を生成
        document.addEventListener('DOMContentLoaded', () => {
            // 固定の色セットを生成
            const equidistantColors = generateEquidistantColors(20);
            const fibonacciColors = generateFibonacciColors(20);
            const colorWheelColors = generateColorWheelColors(20);
            const goldenRatioColors = generateGoldenRatioColors(20);

            // 色カードを表示
            document.getElementById('equidistant-colors').innerHTML = 
                equidistantColors.map((color, index) => createColorCard(color, index)).join('');
            
            document.getElementById('fibonacci-colors').innerHTML = 
                fibonacciColors.map((color, index) => createColorCard(color, index)).join('');
            
            document.getElementById('colorwheel-colors').innerHTML = 
                colorWheelColors.map((color, index) => createColorCard(color, index)).join('');
            
            document.getElementById('goldenratio-colors').innerHTML = 
                goldenRatioColors.map((color, index) => createColorCard(color, index)).join('');

            // インタラクティブセクションの初期化
            updateInteractiveColors();
            updateCurrentSettings();

            // アルゴリズム選択のイベントリスナー
            document.getElementById('algorithm-select').addEventListener('change', () => {
                updateInteractiveColors();
                updateCurrentSettings();
            });

            // スライダーのイベントリスナー
            document.getElementById('color-slider').addEventListener('input', (e) => {
                document.getElementById('color-count').textContent = e.target.value;
                updateInteractiveColors();
                updateCurrentSettings();
            });

            document.getElementById('saturation-slider').addEventListener('input', (e) => {
                document.getElementById('saturation-value').textContent = e.target.value;
                updateInteractiveColors();
                updateCurrentSettings();
            });

            document.getElementById('lightness-slider').addEventListener('input', (e) => {
                document.getElementById('lightness-value').textContent = e.target.value;
                updateInteractiveColors();
                updateCurrentSettings();
            });
        });

        // 現在の設定を更新
        function updateCurrentSettings() {
            const algorithm = document.getElementById('algorithm-select');
            const algorithmText = algorithm.options[algorithm.selectedIndex].text;
            const colorCount = document.getElementById('color-slider').value;
            const saturation = document.getElementById('saturation-slider').value;
            const lightness = document.getElementById('lightness-slider').value;

            document.getElementById('current-algorithm').textContent = algorithmText;
            document.getElementById('current-count').textContent = colorCount;
            document.getElementById('current-saturation').textContent = saturation;
            document.getElementById('current-lightness').textContent = lightness;
        }

        // インタラクティブ色を更新
        function updateInteractiveColors() {
            const algorithm = document.getElementById('algorithm-select').value;
            const colorCount = parseInt(document.getElementById('color-slider').value);
            const saturation = parseFloat(document.getElementById('saturation-slider').value);
            const lightness = parseFloat(document.getElementById('lightness-slider').value);
            
            let colors;
            
            switch(algorithm) {
                case 'golden-ratio':
                    colors = generateGoldenRatioColors(colorCount, saturation, lightness, 0);
                    break;
                case 'equidistant':
                    colors = generateEquidistantColors(colorCount, saturation, lightness, 0);
                    break;
                case 'fibonacci':
                    colors = generateFibonacciColors(colorCount, saturation, lightness, 0);
                    break;
                case 'color-wheel':
                    colors = generateColorWheelColors(colorCount, saturation, lightness, 0);
                    break;
                default:
                    colors = generateGoldenRatioColors(colorCount, saturation, lightness, 0);
            }
            
            document.getElementById('interactive-colors').innerHTML = 
                colors.map((color, index) => createColorCard(color, index)).join('');
        }
    </script>
</body>
</html>
